<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libsidplayfp: exSID_ftdiwrap.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libsidplayfp
   &#160;<span id="projectnumber">2.0.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_c8052a5d5fc54a3d1b6e0aaa42744e96.html">builders</a></li><li class="navelem"><a class="el" href="dir_72b54144977f20270a1b83a5c0f43219.html">exsid-builder</a></li><li class="navelem"><a class="el" href="dir_9cf97136e2b716fe61d4c5d5daf5264e.html">driver</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">exSID_ftdiwrap.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="exSID__defs_8h_source.html">exSID_defs.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &quot;<a class="el" href="exSID__ftdiwrap_8h_source.html">exSID_ftdiwrap.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for exSID_ftdiwrap.c:</div>
<div class="dyncontent">
<div class="center"><img src="exSID__ftdiwrap_8c__incl.png" border="0" usemap="#aexSID__ftdiwrap_8c" alt=""/></div>
<map name="exSID__ftdiwrap_8c" id="aexSID__ftdiwrap_8c">
<area shape="rect" title=" " alt="" coords="103,5,235,32"/>
<area shape="rect" href="exSID__defs_8h.html" title=" " alt="" coords="5,80,112,107"/>
<area shape="rect" title=" " alt="" coords="136,80,203,107"/>
<area shape="rect" href="exSID__ftdiwrap_8h.html" title=" " alt="" coords="227,80,360,107"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae9e677e8c7b1db32c8c1a4d42d5838d5"><td class="memItemLeft" align="right" valign="top"><a id="ae9e677e8c7b1db32c8c1a4d42d5838d5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>XSFW_WRAPDECL</b></td></tr>
<tr class="separator:ae9e677e8c7b1db32c8c1a4d42d5838d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad18675f6c63a3cfa46e3d7cdbb58c9b8"><td class="memItemLeft" align="right" valign="top"><a id="ad18675f6c63a3cfa46e3d7cdbb58c9b8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>EXSID_INTERFACES</b>&#160;&#160;&#160;&quot;libftd2xx, libftdi&quot;</td></tr>
<tr class="separator:ad18675f6c63a3cfa46e3d7cdbb58c9b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a632a20601b59c5606652a46e0c284a48"><td class="memItemLeft" align="right" valign="top"><a id="a632a20601b59c5606652a46e0c284a48"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>_xSfw_dlopen</b>(filename)&#160;&#160;&#160;dlopen(filename, RTLD_NOW|RTLD_LOCAL)</td></tr>
<tr class="separator:a632a20601b59c5606652a46e0c284a48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcaba13356bb1b5b9988c7be5f393741"><td class="memItemLeft" align="right" valign="top"><a id="abcaba13356bb1b5b9988c7be5f393741"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>_xSfw_dlsym</b>(handle,  symbol)&#160;&#160;&#160;dlsym(handle, symbol)</td></tr>
<tr class="separator:abcaba13356bb1b5b9988c7be5f393741"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1f4ab2b6ae08054ef664116bd3c24c6"><td class="memItemLeft" align="right" valign="top"><a id="ae1f4ab2b6ae08054ef664116bd3c24c6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>_xSfw_dlclose</b>(handle)&#160;&#160;&#160;dlclose(handle)</td></tr>
<tr class="separator:ae1f4ab2b6ae08054ef664116bd3c24c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cead2d7244694fe883063dfc5fd73ec"><td class="memItemLeft" align="right" valign="top"><a id="a5cead2d7244694fe883063dfc5fd73ec"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>_xSfw_dlerror</b>()&#160;&#160;&#160;dlerror()</td></tr>
<tr class="separator:a5cead2d7244694fe883063dfc5fd73ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff4cf16cf5540168c202528e3b53d95e"><td class="memItemLeft" align="right" valign="top"><a id="aff4cf16cf5540168c202528e3b53d95e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>_xSfw_clear_dlerror</b>()&#160;&#160;&#160;dlerror()</td></tr>
<tr class="separator:aff4cf16cf5540168c202528e3b53d95e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59fdf5456c0905c283a7c70c979d24ea"><td class="memItemLeft" align="right" valign="top"><a id="a59fdf5456c0905c283a7c70c979d24ea"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>_xSfw_free_errstr</b>(str)&#160;&#160;&#160;/* nothing */</td></tr>
<tr class="separator:a59fdf5456c0905c283a7c70c979d24ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc3926a609546b13143fe4b40a35a669"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>XSFW_DLSYM</b>(a,  b)</td></tr>
<tr class="separator:acc3926a609546b13143fe4b40a35a669"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a8d0cee9b5cba3a0033123eb09d72d0c6"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="exSID__ftdiwrap_8c.html#a8d0cee9b5cba3a0033123eb09d72d0c6">libtype_t</a> { <b>XS_LIBNONE</b>, 
<b>XS_LIBFTDI</b>, 
<b>XS_LIBFTD2XX</b>
 }</td></tr>
<tr class="separator:a8d0cee9b5cba3a0033123eb09d72d0c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adf414c3daaac3db785c1023eb5a391a9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="exSID__ftdiwrap_8c.html#adf414c3daaac3db785c1023eb5a391a9">xSfw_dlopen</a> ()</td></tr>
<tr class="separator:adf414c3daaac3db785c1023eb5a391a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2846b801a2a6399e54bd387df89eea52"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="exSID__ftdiwrap_8c.html#a2846b801a2a6399e54bd387df89eea52">xSfw_usb_setup</a> (void *ftdi, int baudrate, int latency)</td></tr>
<tr class="separator:a2846b801a2a6399e54bd387df89eea52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4caa6ab35310b9fc66bba127cfea8fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="exSID__ftdiwrap_8c.html#aa4caa6ab35310b9fc66bba127cfea8fc">xSfw_dlclose</a> ()</td></tr>
<tr class="separator:aa4caa6ab35310b9fc66bba127cfea8fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>exSID USB FTDI access wrapper </p><dl class="section author"><dt>Author</dt><dd>Thibaut VARENE </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2016 </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Primary target is libftdi (cleaner API), adaptations are made for others. Sadly, libftdi's implementation of read() is unreliable (it doesn't seem to honour the usb timeout value and doesn't properly block long enough). This is why libftd2xx is prefered (tried first) for now. Unfortunately, using libftd2xx comes with a significant performance penalty since the code is tailored for libftdi. </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="acc3926a609546b13143fe4b40a35a669"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc3926a609546b13143fe4b40a35a669">&#9670;&nbsp;</a></span>XSFW_DLSYM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XSFW_DLSYM</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">b&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">        *(<span class="keywordtype">void</span> **)(&amp;a) = _xSfw_dlsym(dlhandle, b);      \</div>
<div class="line">        if (a == NULL) {        \</div>
<div class="line">                dlerrorstr = _xSfw_dlerror();   \</div>
<div class="line">                goto dlfail;    \</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a8d0cee9b5cba3a0033123eb09d72d0c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d0cee9b5cba3a0033123eb09d72d0c6">&#9670;&nbsp;</a></span>libtype_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="exSID__ftdiwrap_8c.html#a8d0cee9b5cba3a0033123eb09d72d0c6">libtype_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flag to signal which of the supported libraries is in use </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa4caa6ab35310b9fc66bba127cfea8fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4caa6ab35310b9fc66bba127cfea8fc">&#9670;&nbsp;</a></span>xSfw_dlclose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void xSfw_dlclose </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Release dlopen'd library. </p>

</div>
</div>
<a id="adf414c3daaac3db785c1023eb5a391a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf414c3daaac3db785c1023eb5a391a9">&#9670;&nbsp;</a></span>xSfw_dlopen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xSfw_dlopen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attempt to dlopen a known working library to access FTDI chip. Will try libftd2xx first, then libftdi. </p><dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error. </dd></dl>

</div>
</div>
<a id="a2846b801a2a6399e54bd387df89eea52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2846b801a2a6399e54bd387df89eea52">&#9670;&nbsp;</a></span>xSfw_usb_setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xSfw_usb_setup </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ftdi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>baudrate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>latency</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Setup FTDI chip to match exSID firmware. Defaults to 8N1, no flow control. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ftdi</td><td>ftdi handle </td></tr>
    <tr><td class="paramname">baudrate</td><td>Target baudrate </td></tr>
    <tr><td class="paramname">latency</td><td>Target latency </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, rval on error. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jan 26 2021 21:16:49 for libsidplayfp by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
